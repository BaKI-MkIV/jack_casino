{"ast":null,"code":"import React from\"react\";import styles from\"./JsonRenderer.module.css\";import{slugify}from\"../SupFunc\";import TabsContainer from\"../TabsContainer/TabsContainer\";import ReactMarkdown from\"react-markdown\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function JsonRenderer(_ref){let{data}=_ref;if(!data)return null;const content=Array.isArray(data.content)?data.content:[];const renderSubtitle=(block,index)=>{const anchorId=block.id||slugify(block.subtitle)||\"subtitle-\".concat(index);return/*#__PURE__*/_jsx(\"h3\",{id:anchorId,className:styles.subtitle,children:block.subtitle},index);};const renderSubSubtitle=(block,index)=>/*#__PURE__*/_jsx(\"h4\",{className:styles.subsubtitle,children:block.subsubtitle},index);const renderQuote=(block,index)=>{const quote=block.quote;return/*#__PURE__*/_jsxs(\"blockquote\",{className:styles.quote,children:[renderMarkdown(quote.content,index),quote.author&&/*#__PURE__*/_jsxs(\"footer\",{children:[\"- \",quote.author]})]},index);};const renderText=(block,index)=>renderMarkdown(block.text,index);const renderTips=(block,index)=>{const tips=block.tips;return/*#__PURE__*/_jsxs(\"div\",{className:styles.tips,children:[tips.title&&/*#__PURE__*/_jsx(\"h4\",{children:tips.title}),renderMarkdown(tips.content,index)]},index);};const renderComment=(block,index)=>{const comment=block.comment;return/*#__PURE__*/_jsxs(\"div\",{className:styles.comment,children:[comment.title&&/*#__PURE__*/_jsx(\"h4\",{children:comment.title}),renderMarkdown(comment.content,index)]},index);};const IMAGE_BASE=process.env.REACT_APP_IMAGE_URL||'/images';const renderImage=(block,index)=>{const image=block.image;const getSrc=img=>typeof img==='string'?\"\".concat(IMAGE_BASE,\"/\").concat(img):\"\".concat(IMAGE_BASE,\"/\").concat(img.path);return/*#__PURE__*/_jsxs(\"div\",{className:styles.imageBlock,children:[/*#__PURE__*/_jsx(\"img\",{src:getSrc(image),alt:\"\"}),typeof image!=='string'&&image.comment&&/*#__PURE__*/_jsx(\"p\",{className:styles.imageComment,children:image.comment})]},index);};const renderLink=(block,index)=>{const link=block.link;return/*#__PURE__*/_jsx(\"a\",{href:link.path,rel:\"noopener noreferrer\",className:styles.link,children:link.wrap||link.path},index);};const renderLinkOut=(block,index)=>{const link=block.link;return/*#__PURE__*/_jsx(\"a\",{href:link.path,target:\"_blank\",rel:\"noopener noreferrer\",className:styles.link,children:link.wrap||link.path},index);};const renderTabs=(block,index)=>{const{tabPaths,subTabsExist}=block.tabs;if(!Array.isArray(tabPaths))return null;return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"1em\",marginBottom:\"1em\"},children:/*#__PURE__*/_jsx(TabsContainer,{tabPaths:tabPaths,subTabsExist:subTabsExist!==null&&subTabsExist!==void 0?subTabsExist:true})},index);};const renderMarkdown=(content,key)=>{if(!content)return null;// Если массив, рендерим рекурсивно\nif(Array.isArray(content)){return content.map((block,index)=>/*#__PURE__*/_jsx(React.Fragment,{children:renderMarkdown(block,index)},index));}// Если строка, рендерим Markdown\nif(typeof content===\"string\"){return/*#__PURE__*/_jsx(ReactMarkdown,{children:content},key);}return null;};// --- Регистр рендереров ---\nconst renderers={subtitle:renderSubtitle,subsubtitle:renderSubSubtitle,quote:renderQuote,text:renderText,tips:renderTips,comment:renderComment,image:renderImage,link:renderLink,linkOut:renderLinkOut,tabs:renderTabs};// --- Главный рендер ---\nconst renderBlocks=blocks=>blocks.map((block,index)=>{// получаем ключ (например, \"text\" или \"quote\")\nconst key=Object.keys(block)[0];const renderer=renderers[key];if(!renderer){console.warn(\"JsonRenderer: \\u043D\\u0435\\u0438\\u0437\\u0432\\u0435\\u0441\\u0442\\u043D\\u044B\\u0439 \\u0442\\u0435\\u0433 \\\"\".concat(key,\"\\\"\"),block);return null;// просто пропускаем\n}return renderer?renderer(block,index):null;});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:styles.content,children:renderBlocks(content)})});}","map":{"version":3,"names":["React","styles","slugify","TabsContainer","ReactMarkdown","jsx","_jsx","jsxs","_jsxs","JsonRenderer","_ref","data","content","Array","isArray","renderSubtitle","block","index","anchorId","id","subtitle","concat","className","children","renderSubSubtitle","subsubtitle","renderQuote","quote","renderMarkdown","author","renderText","text","renderTips","tips","title","renderComment","comment","IMAGE_BASE","process","env","REACT_APP_IMAGE_URL","renderImage","image","getSrc","img","path","imageBlock","src","alt","imageComment","renderLink","link","href","rel","wrap","renderLinkOut","target","renderTabs","tabPaths","subTabsExist","tabs","style","marginTop","marginBottom","key","map","Fragment","renderers","linkOut","renderBlocks","blocks","Object","keys","renderer","console","warn"],"sources":["C:/Users/jacke/WebstormProjects/jack_casino/src/elements/JsonElem/JsonRenderer.jsx"],"sourcesContent":["import React from \"react\";\r\nimport styles from \"./JsonRenderer.module.css\";\r\nimport { slugify } from \"../SupFunc\";\r\nimport TabsContainer from \"../TabsContainer/TabsContainer\";\r\nimport ReactMarkdown from \"react-markdown\";\r\n\r\n\r\nexport default function JsonRenderer({ data }) {\r\n    if (!data) return null;\r\n\r\n    const content = Array.isArray(data.content) ? data.content : [];\r\n\r\n    const renderSubtitle = (block, index) => {\r\n        const anchorId = block.id || slugify(block.subtitle) || `subtitle-${index}`;\r\n        return (\r\n            <h3 id={anchorId} key={index} className={styles.subtitle}>\r\n                {block.subtitle}\r\n            </h3>\r\n        );\r\n    };\r\n\r\n    const renderSubSubtitle = (block, index) => (\r\n        <h4 key={index} className={styles.subsubtitle}>\r\n            {block.subsubtitle}\r\n        </h4>\r\n    );\r\n\r\n    const renderQuote = (block, index) => {\r\n        const quote = block.quote;\r\n        return (\r\n            <blockquote key={index} className={styles.quote}>\r\n                {renderMarkdown(quote.content, index)}\r\n                {quote.author && <footer>- {quote.author}</footer>}\r\n            </blockquote>\r\n        );\r\n    };\r\n\r\n    const renderText = (block, index) => renderMarkdown(block.text, index);\r\n\r\n    const renderTips = (block, index) => {\r\n        const tips = block.tips;\r\n        return (\r\n            <div key={index} className={styles.tips}>\r\n                {tips.title && <h4>{tips.title}</h4>}\r\n                {renderMarkdown(tips.content, index)}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const renderComment = (block, index) => {\r\n        const comment = block.comment;\r\n        return (\r\n            <div key={index} className={styles.comment}>\r\n                {comment.title && <h4>{comment.title}</h4>}\r\n                {renderMarkdown(comment.content, index)}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const IMAGE_BASE = process.env.REACT_APP_IMAGE_URL || '/images';\r\n\r\n    const renderImage = (block, index) => {\r\n        const image = block.image;\r\n        const getSrc = (img) => typeof img === 'string'\r\n            ? `${IMAGE_BASE}/${img}`\r\n            : `${IMAGE_BASE}/${img.path}`;\r\n\r\n        return (\r\n            <div key={index} className={styles.imageBlock}>\r\n                <img src={getSrc(image)} alt=\"\" />\r\n                {typeof image !== 'string' && image.comment && (\r\n                    <p className={styles.imageComment}>{image.comment}</p>\r\n                )}\r\n            </div>\r\n        );\r\n    };\r\n\r\n\r\n    const renderLink = (block, index) => {\r\n        const link = block.link;\r\n        return (\r\n            <a\r\n                key={index}\r\n                href={link.path}\r\n                rel=\"noopener noreferrer\"\r\n                className={styles.link}\r\n            >\r\n                {link.wrap || link.path}\r\n            </a>\r\n        );\r\n    };\r\n\r\n    const renderLinkOut = (block, index) => {\r\n        const link = block.link;\r\n        return (\r\n            <a\r\n                key={index}\r\n                href={link.path}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className={styles.link}\r\n            >\r\n                {link.wrap || link.path}\r\n            </a>\r\n        );\r\n    };\r\n\r\n    const renderTabs = (block, index) => {\r\n        const { tabPaths, subTabsExist } = block.tabs;\r\n        if (!Array.isArray(tabPaths)) return null;\r\n\r\n        return (\r\n            <div key={index} style={{ marginTop: \"1em\", marginBottom: \"1em\" }}>\r\n                <TabsContainer tabPaths={tabPaths} subTabsExist={subTabsExist ?? true} />\r\n            </div>\r\n        );\r\n    };\r\n\r\n\r\n    const renderMarkdown = (content, key) => {\r\n        if (!content) return null;\r\n\r\n        // Если массив, рендерим рекурсивно\r\n        if (Array.isArray(content)) {\r\n            return content.map((block, index) => (\r\n                <React.Fragment key={index}>\r\n                    {renderMarkdown(block, index)}\r\n                </React.Fragment>\r\n            ));\r\n        }\r\n\r\n        // Если строка, рендерим Markdown\r\n        if (typeof content === \"string\") {\r\n            return <ReactMarkdown key={key}>{content}</ReactMarkdown>;\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n\r\n\r\n    // --- Регистр рендереров ---\r\n    const renderers = {\r\n        subtitle: renderSubtitle,\r\n        subsubtitle: renderSubSubtitle,\r\n        quote: renderQuote,\r\n        text: renderText,\r\n        tips: renderTips,\r\n        comment: renderComment,\r\n        image: renderImage,\r\n        link: renderLink,\r\n        linkOut: renderLinkOut,\r\n        tabs: renderTabs,\r\n    };\r\n\r\n\r\n\r\n    // --- Главный рендер ---\r\n    const renderBlocks = (blocks) =>\r\n        blocks.map((block, index) => {\r\n            // получаем ключ (например, \"text\" или \"quote\")\r\n            const key = Object.keys(block)[0];\r\n            const renderer = renderers[key];\r\n\r\n            if (!renderer) {\r\n                console.warn(`JsonRenderer: неизвестный тег \"${key}\"`, block);\r\n                return null; // просто пропускаем\r\n            }\r\n\r\n            return renderer ? renderer(block, index) : null;\r\n        });\r\n\r\n    return (\r\n        <div>\r\n            <div className={styles.content}>{renderBlocks(content)}</div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}