{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import{Routes,Route,useLocation}from\"react-router-dom\";import MainPreviewPage from\"./pages/MainPreviewPage\";import MainPage from\"./pages/MainPage\";import PlotPage from\"./pages/inMenu/PlotPage\";import\"./App.css\";import NPCPage from\"./pages/inMenu/NPCPage\";import HandbookPage from\"./pages/inMenu/HandbookPage\";import HomebrewPage from\"./pages/inMenu/HomebrewPage\";import CreationPage from\"./pages/inMenu/CreationPage\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const containerRef=useRef(null);const location=useLocation();const[showPreview,setShowPreview]=useState(()=>{if(location.pathname===\"/\"){sessionStorage.setItem(\"hasSeenPreview\",\"false\");}const hasSeenPreview=sessionStorage.getItem(\"hasSeenPreview\")===\"true\";const isMainPage=location.pathname===\"/\";return isMainPage&&!hasSeenPreview;});const[isFading,setIsFading]=useState(false);const[currentPath,setCurrentPath]=useState(location.pathname);// Отслеживаем смену маршрута\nuseEffect(()=>{if(location.pathname!==currentPath&&!showPreview){setIsFading(true);// Запускаем затухание при смене маршрута\n}},[location.pathname,currentPath,showPreview]);// Ставим фокус на контейнер для MainPreviewPage\nuseEffect(()=>{if(showPreview&&containerRef.current){containerRef.current.focus();}},[showPreview]);const handleExitPreview=()=>{setIsFading(true);sessionStorage.setItem(\"hasSeenPreview\",\"true\");};return/*#__PURE__*/_jsx(\"div\",{ref:containerRef,tabIndex:0,onKeyDown:showPreview?handleExitPreview:undefined,onClick:showPreview?handleExitPreview:undefined,style:{outline:\"none\"},className:isFading?\"fade-out\":\"fade-in\",onAnimationEnd:()=>{if(isFading){setCurrentPath(location.pathname);// Обновляем путь после затухания\nsetShowPreview(location.pathname===\"/\"&&sessionStorage.getItem(\"hasSeenPreview\")!==\"true\");setIsFading(false);// Переключаем на fade-in\n}},children:showPreview?/*#__PURE__*/_jsx(MainPreviewPage,{}):/*#__PURE__*/_jsxs(Routes,{location:currentPath,children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(MainPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/plot\",element:/*#__PURE__*/_jsx(PlotPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/npc\",element:/*#__PURE__*/_jsx(NPCPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/handbook\",element:/*#__PURE__*/_jsx(HandbookPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/homebrew\",element:/*#__PURE__*/_jsx(HomebrewPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/creation\",element:/*#__PURE__*/_jsx(CreationPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(\"div\",{children:\"\\u0421\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u0430\"})})]})});}","map":{"version":3,"names":["React","useState","useRef","useEffect","Routes","Route","useLocation","MainPreviewPage","MainPage","PlotPage","NPCPage","HandbookPage","HomebrewPage","CreationPage","jsx","_jsx","jsxs","_jsxs","App","containerRef","location","showPreview","setShowPreview","pathname","sessionStorage","setItem","hasSeenPreview","getItem","isMainPage","isFading","setIsFading","currentPath","setCurrentPath","current","focus","handleExitPreview","ref","tabIndex","onKeyDown","undefined","onClick","style","outline","className","onAnimationEnd","children","path","element"],"sources":["C:/Users/jacke/WebstormProjects/jack_casino/src/App.js"],"sourcesContent":["\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport { Routes, Route, useLocation } from \"react-router-dom\";\r\nimport MainPreviewPage from \"./pages/MainPreviewPage\";\r\nimport MainPage from \"./pages/MainPage\";\r\nimport PlotPage from \"./pages/inMenu/PlotPage\";\r\nimport \"./App.css\";\r\nimport NPCPage from \"./pages/inMenu/NPCPage\";\r\nimport HandbookPage from \"./pages/inMenu/HandbookPage\";\r\nimport HomebrewPage from \"./pages/inMenu/HomebrewPage\";\r\nimport CreationPage from \"./pages/inMenu/CreationPage\";\r\n\r\nexport default function App() {\r\n    const containerRef = useRef(null);\r\n    const location = useLocation();\r\n    const [showPreview, setShowPreview] = useState(() => {\r\n        if (location.pathname === \"/\") {\r\n            sessionStorage.setItem(\"hasSeenPreview\", \"false\");\r\n        }\r\n        const hasSeenPreview = sessionStorage.getItem(\"hasSeenPreview\") === \"true\";\r\n        const isMainPage = location.pathname === \"/\";\r\n        return isMainPage && !hasSeenPreview;\r\n    });\r\n    const [isFading, setIsFading] = useState(false);\r\n    const [currentPath, setCurrentPath] = useState(location.pathname);\r\n\r\n    // Отслеживаем смену маршрута\r\n    useEffect(() => {\r\n        if (location.pathname !== currentPath && !showPreview) {\r\n            setIsFading(true); // Запускаем затухание при смене маршрута\r\n        }\r\n    }, [location.pathname, currentPath, showPreview]);\r\n\r\n    // Ставим фокус на контейнер для MainPreviewPage\r\n    useEffect(() => {\r\n        if (showPreview && containerRef.current) {\r\n            containerRef.current.focus();\r\n        }\r\n    }, [showPreview]);\r\n\r\n    const handleExitPreview = () => {\r\n        setIsFading(true);\r\n        sessionStorage.setItem(\"hasSeenPreview\", \"true\");\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={containerRef}\r\n            tabIndex={0}\r\n            onKeyDown={showPreview ? handleExitPreview : undefined}\r\n            onClick={showPreview ? handleExitPreview : undefined}\r\n            style={{ outline: \"none\" }}\r\n            className={isFading ? \"fade-out\" : \"fade-in\"}\r\n            onAnimationEnd={() => {\r\n                if (isFading) {\r\n                    setCurrentPath(location.pathname); // Обновляем путь после затухания\r\n                    setShowPreview(location.pathname === \"/\" && sessionStorage.getItem(\"hasSeenPreview\") !== \"true\");\r\n                    setIsFading(false); // Переключаем на fade-in\r\n                }\r\n            }}\r\n        >\r\n            {showPreview ? (\r\n                <MainPreviewPage />\r\n            ) : (\r\n                <Routes location={currentPath}>\r\n                    <Route path=\"/\" element={<MainPage />} />\r\n                    <Route path=\"/plot\" element={<PlotPage />} />\r\n                    <Route path=\"/npc\" element={<NPCPage />} />\r\n                    <Route path=\"/handbook\" element={<HandbookPage />} />\r\n                    <Route path=\"/homebrew\" element={<HomebrewPage />} />\r\n                    <Route path=\"/creation\" element={<CreationPage />} />\r\n\r\n                    <Route path=\"*\" element={<div>Страница не найдена</div>} />\r\n                </Routes>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"mappings":"AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,MAAM,CAAEC,KAAK,CAAEC,WAAW,KAAQ,kBAAkB,CAC7D,MAAO,CAAAC,eAAe,KAAM,yBAAyB,CACrD,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,CAAAC,QAAQ,KAAM,yBAAyB,CAC9C,MAAO,WAAW,CAClB,MAAO,CAAAC,OAAO,KAAM,wBAAwB,CAC5C,MAAO,CAAAC,YAAY,KAAM,6BAA6B,CACtD,MAAO,CAAAC,YAAY,KAAM,6BAA6B,CACtD,MAAO,CAAAC,YAAY,KAAM,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvD,cAAe,SAAS,CAAAC,GAAGA,CAAA,CAAG,CAC1B,KAAM,CAAAC,YAAY,CAAGjB,MAAM,CAAC,IAAI,CAAC,CACjC,KAAM,CAAAkB,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACe,WAAW,CAAEC,cAAc,CAAC,CAAGrB,QAAQ,CAAC,IAAM,CACjD,GAAImB,QAAQ,CAACG,QAAQ,GAAK,GAAG,CAAE,CAC3BC,cAAc,CAACC,OAAO,CAAC,gBAAgB,CAAE,OAAO,CAAC,CACrD,CACA,KAAM,CAAAC,cAAc,CAAGF,cAAc,CAACG,OAAO,CAAC,gBAAgB,CAAC,GAAK,MAAM,CAC1E,KAAM,CAAAC,UAAU,CAAGR,QAAQ,CAACG,QAAQ,GAAK,GAAG,CAC5C,MAAO,CAAAK,UAAU,EAAI,CAACF,cAAc,CACxC,CAAC,CAAC,CACF,KAAM,CAACG,QAAQ,CAAEC,WAAW,CAAC,CAAG7B,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAC8B,WAAW,CAAEC,cAAc,CAAC,CAAG/B,QAAQ,CAACmB,QAAQ,CAACG,QAAQ,CAAC,CAEjE;AACApB,SAAS,CAAC,IAAM,CACZ,GAAIiB,QAAQ,CAACG,QAAQ,GAAKQ,WAAW,EAAI,CAACV,WAAW,CAAE,CACnDS,WAAW,CAAC,IAAI,CAAC,CAAE;AACvB,CACJ,CAAC,CAAE,CAACV,QAAQ,CAACG,QAAQ,CAAEQ,WAAW,CAAEV,WAAW,CAAC,CAAC,CAEjD;AACAlB,SAAS,CAAC,IAAM,CACZ,GAAIkB,WAAW,EAAIF,YAAY,CAACc,OAAO,CAAE,CACrCd,YAAY,CAACc,OAAO,CAACC,KAAK,CAAC,CAAC,CAChC,CACJ,CAAC,CAAE,CAACb,WAAW,CAAC,CAAC,CAEjB,KAAM,CAAAc,iBAAiB,CAAGA,CAAA,GAAM,CAC5BL,WAAW,CAAC,IAAI,CAAC,CACjBN,cAAc,CAACC,OAAO,CAAC,gBAAgB,CAAE,MAAM,CAAC,CACpD,CAAC,CAED,mBACIV,IAAA,QACIqB,GAAG,CAAEjB,YAAa,CAClBkB,QAAQ,CAAE,CAAE,CACZC,SAAS,CAAEjB,WAAW,CAAGc,iBAAiB,CAAGI,SAAU,CACvDC,OAAO,CAAEnB,WAAW,CAAGc,iBAAiB,CAAGI,SAAU,CACrDE,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAC3BC,SAAS,CAAEd,QAAQ,CAAG,UAAU,CAAG,SAAU,CAC7Ce,cAAc,CAAEA,CAAA,GAAM,CAClB,GAAIf,QAAQ,CAAE,CACVG,cAAc,CAACZ,QAAQ,CAACG,QAAQ,CAAC,CAAE;AACnCD,cAAc,CAACF,QAAQ,CAACG,QAAQ,GAAK,GAAG,EAAIC,cAAc,CAACG,OAAO,CAAC,gBAAgB,CAAC,GAAK,MAAM,CAAC,CAChGG,WAAW,CAAC,KAAK,CAAC,CAAE;AACxB,CACJ,CAAE,CAAAe,QAAA,CAEDxB,WAAW,cACRN,IAAA,CAACR,eAAe,GAAE,CAAC,cAEnBU,KAAA,CAACb,MAAM,EAACgB,QAAQ,CAAEW,WAAY,CAAAc,QAAA,eAC1B9B,IAAA,CAACV,KAAK,EAACyC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEhC,IAAA,CAACP,QAAQ,GAAE,CAAE,CAAE,CAAC,cACzCO,IAAA,CAACV,KAAK,EAACyC,IAAI,CAAC,OAAO,CAACC,OAAO,cAAEhC,IAAA,CAACN,QAAQ,GAAE,CAAE,CAAE,CAAC,cAC7CM,IAAA,CAACV,KAAK,EAACyC,IAAI,CAAC,MAAM,CAACC,OAAO,cAAEhC,IAAA,CAACL,OAAO,GAAE,CAAE,CAAE,CAAC,cAC3CK,IAAA,CAACV,KAAK,EAACyC,IAAI,CAAC,WAAW,CAACC,OAAO,cAAEhC,IAAA,CAACJ,YAAY,GAAE,CAAE,CAAE,CAAC,cACrDI,IAAA,CAACV,KAAK,EAACyC,IAAI,CAAC,WAAW,CAACC,OAAO,cAAEhC,IAAA,CAACH,YAAY,GAAE,CAAE,CAAE,CAAC,cACrDG,IAAA,CAACV,KAAK,EAACyC,IAAI,CAAC,WAAW,CAACC,OAAO,cAAEhC,IAAA,CAACF,YAAY,GAAE,CAAE,CAAE,CAAC,cAErDE,IAAA,CAACV,KAAK,EAACyC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEhC,IAAA,QAAA8B,QAAA,CAAK,0GAAmB,CAAK,CAAE,CAAE,CAAC,EACvD,CACX,CACA,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}